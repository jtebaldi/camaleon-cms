- groups = @site.get_field_groups
- @secondary_menu = true
- @tabs = ["information", "configuration", "seo_settings", "email_settings", "filesystem_settings", "media_settings"]
/ PAGE CONTENT WRAPPER
.content-i  
  .content-box
    .element-wrapper
      %h4.element-header Site Settings
      .element-box
        = form_for @site, as: "site", url: {action: :site_saved}, html: {id: "site_settings_form", class: "panel-body cama_ajax_request validate"} do |f|
          .tabs
            .panel-body.tab-content.row
              = render partial: 'layouts/camaleon_cms/admin/form_error', locals: {data: @site}
              #tab-information{:class => "tab-pane #{"active" if ["", nil].include?(params[:tab])}"}
                .form-group
                  = f.label t('camaleon_cms.admin.button.domain', default: 'Domain')
                  %br/
                  %small= t('camaleon_cms.admin.sites.message.enter_key_domain', default: 'Enter your domain here')
                  %br/
                  = f.text_field :slug, :class => "form-control required"
                .form-group
                  = f.label t('camaleon_cms.admin.table.name')
                  %br/
                  = f.text_field :name, :class => "form-control translatable"
                .form-group
                  = f.label t('camaleon_cms.admin.table.description')
                  %br/
                  = f.text_area :description, :class => "form-control translatable"
                .form-group.admin_logo_upload
                  %label{:for => ""}= t('camaleon_cms.admin.table.logo')
                  %br/
                  = hidden_field :options, :logo, :class => "form-control unput_upload", :value => @site.get_option("logo"), "data-label" => "#{t('camaleon_cms.admin.button.upload_image')}"
                .form-group.admin_icon_upload
                  %label{:for => ""}= t('camaleon_cms.admin.table.favicon')
                  %br/
                  = hidden_field :options, :icon, :class => "form-control unput_upload", :value => @site.get_option("icon"), "data-label" => "#{t('camaleon_cms.admin.button.upload_icon')}", "data-ext" => "ico"
              = render "configuration_settings", f: f
              - if groups.present?
                #tab-other-configuration{:class => "#{"active" if "other_config" == params[:tab]} tab-pane"}
                  = render partial: "camaleon_cms/admin/settings/custom_fields/render", locals: {record: @site, field_groups: groups}
              = render "seo_settings", f: f
              = render "email_settings", f: f
              = render "file_system_settings", f: f
              = render "media_settings", f: f
            .panel-footer
              %button.btn.btn-primary.pull-right{:type => "submit"}= t('camaleon_cms.admin.button.submit')
    
:javascript
  jQuery(function () {
      var panel = $("#site_settings_form");
      panel.validate();
      panel.find('.unput_upload, .input_upload').input_upload();

      // smtp
      panel.find("#options_mailer_enabled").change(function () {
          if (!$(this).is(":checked"))
              panel.find("#tab-email_settings .toggleable").find("input, select, textarea").not(this).not("input[type='hidden']").attr("disabled", true)
          else
              panel.find("#tab-email_settings .toggleable").find("input, select, textarea").not(this).removeAttr("disabled")
      }).trigger("change");

      // filesystem
      panel.find("#options_filesystem_type").change(function () {
          if (!$(this).is(":checked"))
              panel.find("#tab-filesystem_settings .toggleable").find("input, select, textarea").not(this).not("input[type='hidden']").attr("disabled", true)
          else
              panel.find("#tab-filesystem_settings .toggleable").find("input, select, textarea").not(this).removeAttr("disabled")
          $(this).removeAttr("disabled");
      }).trigger("change");
  });
